# 06基础运算符，数学运算

参考文章为[[基础运算符，数学运算 (javascript.info)](https://zh.javascript.info/operators)](https://zh.javascript.info/alert-prompt-confirm)



- **运算元** —— 运算符应用的对象。比如说乘法运算 `5 * 2`，有两个运算元：左运算元 `5` 和右运算元 `2`。有时候人们也称其为“参数”而不是“运算元”。
- **一元运算符**：一个运算符对应的只有一个运算元。例如一元负号运算符（unary negation）`-`
-  **二元运算符**：一个运算符拥有两个运算元。

```js
let x = 1;

x = -x;
alert( x ); // -1，一元负号运算符生效

let z = 1, y = 3;
alert( y - z ); // 2，二元运算符减号做减运算

```



## 二、数学运算

1. 加法 `+`,

2. 减法 `-`,

3. 乘法 `*`,

4. 除法 `/`,

5. 取余 `%`。`a % b` 的结果是 `a` 整除 `b` 的 [余数](https://zh.wikipedia.org/zh-hans/余数)。例如：

```js
alert( 5 % 2 ); // 1，5 除以 2 的余数
```

6. 求幂 `**`。求幂运算 `a ** b` 将 `a` 提升至 `a` 的 `b` 次幂，。例如：

```js
alert( 8 ** (1/3) ); // 2（1/3 次方与立方根相同)
```



## 三、用二元运算符` +` 连接字符串

如果加号 `+` 被应用于字符串，它将合并（连接）各个字符串。

注意：运算符是按顺序工作，只要`+`碰到任意一个是字符串的运算元，那么另一个运算元也将被转化为字符串。

```js
let s = "my" + "string";

alert(s); // mystring

alert( '1' + 2 ); // "12"

alert(2 + 2 + '1' ); // "41"，不是 "221" 运算符是按顺序工作。第一个 + 将两个数字相加，所以返回 4，然后下一个 + 将字符串 1 加入其中

alert('1' + 2 + 2); // "122"，不是 "14" 第一个操作数是一个字符串，所以编译器将其他两个操作数也视为了字符串。2 被与 '1' 连接到了一起，也就是像 '1' + 2 = "12" 然后 "12" + 2 = "122" 这样。
```



## 四、用一元运算符`+`进行数字型转化

一元运算符加号 `+` 应用于单个值：

* 对数字没有任何作用
* 如果运算元不是数字，加号 `+` 则会将其转化为数字

一元运算符`+`和`Number(...)`的效果是一样的，但是更加简短。

```js

let x = 1;
alert( +x ); // 1 对数字无效

let y = -2;
alert( +y ); // -2 对数字无效

alert( +true ); // 1 用一元运算符+进行数字型转化
alert( +"" );   // 0 用一元运算符+进行数字型转化

//一元运算符加号首先起作用，它们将字符串转为数字，然后二元运算符加号对它们进行求和。
let apples = "2";
let oranges = "3";

alert( +apples + +oranges ); // 5 在二元运算符加号起作用之前，所有的值都被转化为了数字
alert( Number(apples) + Number(oranges) ); // 5 用Number(...)可以和+达到同样的效果
```



## 五、运算符优先级

在 JavaScript 中有众多运算符。每个运算符都有对应的优先级数字。

1. 数字越大，越先执行。
2. 如果优先级相同，则按照由左至右的顺序执行。
3. 一元运算符优先级高于二元运算符。
4. `=` 是一个运算符。语句 `x = value` 将值 `value` 写入 `x` **然后返回 value**。

| 优先级（优先级高于） | 名称     | 符号 |
| :------------------- | :------- | :--- |
| …                    | …        | …    |
| 15                   | 一元加号 | `+`  |
| 15                   | 一元负号 | `-`  |
| 14                   | 求幂     | `**` |
| 13                   | 乘号     | `*`  |
| 13                   | 除号     | `/`  |
| 12                   | 加号     | `+`  |
| 12                   | 减号     | `-`  |
| …                    | …        | …    |
| 2                    | 赋值符   | `=`  |
| …                    | …        | …    |



## 六、赋值

赋值符号 `=` 是一个运算符。语句 `x = value` 将值 `value` 写入 `x` **然后返回 value**。



1. 链式赋值（Chaining assignments）：链式赋值从右到左进行计算。

```js
c = 2 + 2;
b = c;
a = c;
```



2. 原地修改：“修改并赋值”的运算符，例如`+=`、`*=`等。

```js
let n = 2;
n += 5; // 现在 n = 7（等同于 n = n + 5）
n *= 2; // 现在 n = 14（等同于 n = n * 2）

alert( n ); // 14
```



3. 自增/自减:对一个数进行加一、减一。

   （1）自增/自减只能应用于变量。

   * **自增** `++` 将变量与 1 相加：

   ```js
   let counter = 2;
   counter++;      // 和 counter = counter + 1 效果一样，但是更简洁
   alert( counter ); // 3
   ```

   * **自减** `--` 将变量与 1 相减：

   ```js
   let counter = 2;
   counter--;      // 和 counter = counter - 1 效果一样，但是更简洁
   alert( counter ); // 1
   ```

   

   （2）运算符 `++` 和 `--` 可以置于变量前，也可以置于变量后。

   - 前置形式：`++counter`

   > 如果我们想要对变量进行自增操作，**并且** 需要立刻使用自增后的值，那么我们需要使用前置形式

   ```js
   let counter = 0;
   alert( ++counter ); // 1
   ```

   - 后置形式：`counter++`

   > 如果我们想要将一个数加一，但是我们想使用其自增之前的旧值，那么我们需要使用后置形式

   ```js
   let counter = 0;
   alert( counter++ ); // 0
   ```

   

## 七、位运算符

下面是位运算符：

- 按位与 ( `&` )
- 按位或 ( `|` )
- 按位异或 ( `^` )
- 按位非 ( `~` )
- 左移 ( `<<` )
- 右移 ( `>>` )
- 无符号右移 ( `>>>` )



## 八、逗号运算符

逗号运算符的优先级比 `=` 还要低。

逗号运算符能让我们处理多个表达式，使用 `,` 将它们分开。每个表达式都运行了，但是**只有最后一个**的结果会被返回。

```js
let a = (1 + 2, 3 + 4);

alert( a ); // 7（3 + 4 的结果）
```



## 九、练习

1. 以下代码中变量 `a`、`b`、`c`、`d` 的最终值分别是多少？

```js
let a = 1, b = 1;

alert( ++a ); // 2，前置运算符返回最新值
alert( b++ ); // 1，后置运算符返回旧值

alert( a ); // 2，自增一次
alert( b ); // 2，自增一次
```



2. 下面这段代码运行完成后，代码中的 `a` 和 `x` 的值是多少？

```js
let a = 2;

let x = 1 + (a *= 2);
```

- `a = 4`（乘以 2）
- `x = 5`（相当于计算 1 + 4）



3. 计算实例：

```js
"" + 1 + 0 = "10" // (1)
"" - 1 + 0 = -1 // (2)
true + false = 1
6 / "3" = 2
"2" * "3" = 6
4 + 5 + "px" = "9px"
"$" + 4 + 5 = "$45"
"4" - 2 = 2
"4px" - 2 = NaN
"  -9  " + 5 = "  -9  5" // (3)
"  -9  " - 5 = -14 // (4)
null + 1 = 1 // (5) null 经过数字转换之后会变为 0。
undefined + 1 = NaN // (6) undefined 经过数字转换之后会变为 NaN。
" \t \n" - 2 = -2 // (7) 字符串转换为数字时，会忽略字符串的首尾处的空格字符。在这里，整个字符串由空格字符组成，包括 \t、\n 以及它们之间的“常规”空格。因此，类似于空字符串，所以会变为 0。
```

