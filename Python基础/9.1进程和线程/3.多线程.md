# çº¿ç¨‹

[å‚è€ƒç½‘é¡µï¼šå»–](https://www.liaoxuefeng.com/wiki/1016959663602400/1017629247922688)

**ä½¿ç”¨æ¨¡å—ï¼š**  
`_thread`:ä½çº§æ¨¡å—  
`threading`:é«˜çº§æ¨¡å—,å·²å¯¹`_thread`è¿›è¡Œäº†å°è£…ï¼ˆå¸¸ç”¨ï¼‰  


**ä½¿ç”¨åŸç†ï¼š**  
ä»»ä½•è¿›ç¨‹é»˜è®¤å°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬æŠŠè¯¥çº¿ç¨‹ç§°ä¸ºä¸»çº¿ç¨‹ï¼Œåå­—å«MainThreadã€‚  
ä¸»çº¿ç¨‹åˆå¯ä»¥å¯åŠ¨æ–°çš„çº¿ç¨‹ï¼Œå­çº¿ç¨‹çš„åå­—åœ¨åˆ›å»ºæ—¶æŒ‡å®šã€‚  
åå­—ä»…ä»…åœ¨æ‰“å°æ—¶ç”¨æ¥æ˜¾ç¤ºï¼Œå®Œå…¨æ²¡æœ‰å…¶ä»–æ„ä¹‰ï¼Œå¦‚æœä¸èµ·åå­—Pythonå°±è‡ªåŠ¨ç»™çº¿ç¨‹å‘½åä¸ºThread-1ï¼ŒThread-2â€¦â€¦  


**ä½¿ç”¨æ–¹æ³•ï¼š**  
åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ–¹æ³•ï¼šæŠŠä¸€ä¸ªå‡½æ•°ä¼ å…¥å¹¶åˆ›å»ºThreadå®ä¾‹ï¼Œç„¶åè°ƒç”¨start()å¼€å§‹æ‰§è¡Œ


## ä¸€ã€åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå­çº¿ç¨‹å¹¶ç­‰å¾…å…¶ç»“æŸ  

`current_thread()å‡½æ•°`ï¼šå®ƒæ°¸è¿œè¿”å›å½“å‰çº¿ç¨‹çš„å®ä¾‹


```python
import time, threading

# æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç :
def loop():
    print('thread %s is running...' % threading.current_thread().name)
    n = 0
    while n < 5:
        n = n + 1
        print('thread %s >>> %s' % (threading.current_thread().name, n))
        time.sleep(1)
    print('thread %s ended.' % threading.current_thread().name)

print('thread %s is running...' % threading.current_thread().name)
t = threading.Thread(target=loop, name='LoopThread')  # åˆ›å»ºçº¿ç¨‹å®ä¾‹
t.start()  # çº¿ç¨‹
t.join()   # ç­‰å¾…çº¿ç¨‹ç»“æŸåæ‰§è¡Œä¸‹åˆ—ä»£ç 
print('thread %s ended.' % threading.current_thread().name)


'''
# Output:

thread MainThread is running...
thread LoopThread is running...
thread LoopThread >>> 1
thread LoopThread >>> 2
thread LoopThread >>> 3
thread LoopThread >>> 4
thread LoopThread >>> 5
thread LoopThread ended.
thread MainThread ended.
'''
```







## äºŒã€ä¸ºé˜²æ­¢

```python
import time, threading

# å‡å®šè¿™æ˜¯ä½ çš„é“¶è¡Œå­˜æ¬¾:
balance = 0
lock = threading.Lock()
def change_it(n):
    # å…ˆå­˜åå–ï¼Œç»“æœåº”è¯¥ä¸º0:
    global balance
    balance = balance + n
    balance = balance - n

def run_thread(n):
    for i in range(100000):
        # å…ˆè¦è·å–é”:
        lock.acquire()
        try:
            # æ”¾å¿ƒåœ°æ”¹å§:
            change_it(n)    # ç»™change_it(n)ä¸Šå¥½é”äº†ğŸ”’
        finally:
            # æ”¹å®Œäº†ä¸€å®šè¦é‡Šæ”¾é”:
            lock.release()

t1 = threading.Thread(target=run_thread, args=(5,))
t2 = threading.Thread(target=run_thread, args=(8,))
t1.start()
t2.start()
t1.join()
t2.join()
print(balance)


'''
# Output:

'''

```










```python





'''
# Output:

'''

```











```python





'''
# Output:

'''

```











```python





'''
# Output:

'''

```